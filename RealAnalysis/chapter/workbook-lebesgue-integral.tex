
\section{Definition of Lebesgue Integral}

\begin{exercise}{}{}
  Suppose $m (E) > 0$, $f \in L(E)$, $f$ is non-negative and $\int_E f(x)\mathrm{d} x = 0$.
  Prove that $f(x) = 0$ a.e.
\end{exercise}

\begin{proof}
  Define $E_n = \{x \in E: f(x) \geq \frac{1}{n}\}$,
  then since $f$ is non-negative, we have
  \begin{equation}
    \int_{E_n} f(x)\mathrm{d} x \leq \int_E f(x)\mathrm{d} x = 0
    \quad
    \text{and}
    \quad
    \int_{E_n} f(x) \mathrm{d} x \geq \frac{1}{n} m(E_n).
  \end{equation}
  Thus we know $m(E_n) = 0$ for all $n \geq 1$.
  On the other hand, by sub-additivity of measure
  \begin{equation}
    \{x \in E: f(x) \neq 0\} = \cup_{n = 1}^{\infty} E_n
    \Rightarrow
    m(\{f \neq 0\}) \leq \sum_{n = 1}^{\infty} m(E_n).
  \end{equation}
  So $m(\{f \neq 0\}) = 0$, i.e., $f(x) = 0$ a.e.
\end{proof}

\begin{exercise}{}{}
  $m (E) \neq 0$, $f \in L(E)$, for any measurable function $\varphi(x)$,
  $\int_E f(x)\varphi(x)\mathrm{d} x = 0$. Prove that $f(x) = 0$ a.e. in $E$.
\end{exercise}

\begin{proof}
  For any $n \in \mathbb{Z}^+$. Define $E_n := \{x \in E: f(x) \geq \frac{1}{n}\}$.
  Then
  \begin{equation}
    0 \leq \frac{1}{n} m(E_n) \leq \int_{E_n} f(x)\mathrm{d} x = \int_E \chi_{E_n}(x) f(x)\mathrm{d} x = 0,
  \end{equation}
  thus $m(E_n) = 0$.
  We get $m(\{f > 0\}) = m(\cup_{n=1}^{+\infty} E_n) = 0$, similarly we can prove $m(\{f < 0\}) = 0$.
\end{proof}

\begin{exercise}{}{}
  Let $E$ be a measurable set with finite measure, and $f$ be a measurable function.
  Define $E_n = \{n - 1 \leq f < n\}$, where $n \in \mathbb{Z}$.
  Prove that $f$ is Lebesgue integrable if and only if
  \begin{equation}
    \sum\limits_{- \infty}^{+\infty} |n| \cdot m(E_n) < +\infty.
  \end{equation}
\end{exercise}

\begin{proof}
  When $n \geq 1$, according to the definition of Lebesgue integral,
  \begin{equation}
    |n| \cdot m(E_n) = \int_{E_n} n \mathrm{d} x \geq \int_{E_n} |f(x)| \mathrm{d}x
    > |n-1| \cdot m(E_n).
  \end{equation}
  Similarly, when $n < 1$,
  \begin{equation}
    |n - 1| \cdot m(E_n) = (1-n) \cdot m(E_n) \geq \int_{E_n} |f(x)|\mathrm{d}x
    > |n|\cdot m(E_n).
  \end{equation}

  Since $f$ is Lebesgue integrable, then $|f|$ is integrable,
  \begin{align}
    +\infty > \int_E |f|\mathrm{d} x
    &= \sum\limits_{n = 1}^{+\infty} \int_{E_n} |f|\mathrm{d}x + \sum\limits_{n = 0}^{-\infty} \int_{E_n}|f|\mathrm{d}x\\
    &> \sum\limits_{n = 1}^{+\infty} |n-1| \cdot m(E_n)
    + \sum\limits_{n = 0}^{-\infty} |n| \cdot m(E_n)\\
    &= \sum\limits_{n = -\infty}^{+\infty} |n| \cdot m(E_n) - \sum\limits_{n = 1}^{+\infty} m(E_n),
  \end{align}
  here, $\sum\limits_{n = 1}^{\infty} m(E_n) = m(\{f \geq 1\}) < \infty$.
  Therefore the conclusion holds.
\end{proof}

\begin{exercise}{}{}
  If $f \in L([a, b])$. Prove that for any $\epsilon > 0$, there exists a
  (1) measurable and bounded;
  (2) continuous;
  (3) polynomial;
  (4) step function
  $g(x)$ such that
  \begin{equation}
    \int_a^b |f(x) - g(x)| \mathrm{d} x < \epsilon.
  \end{equation}
\end{exercise}

\begin{proof}
  (1) Given $M > 0$, take
  \begin{equation}
    g(x) =
    \begin{cases}
      f(x) & |f(x)| \leq M; \\
      M\cdot \operatorname{sgn}(f(x)) & |f(x)| > M.
    \end{cases}
  \end{equation}
  $f(x) \in L([a,b])$ indicates $f$ is finite a.e.,
  then $\int_a^b |f-g|\mathrm{d} x \leq \int_{\{|f| > M\}} (|f| + M) \mathrm{d} x < \epsilon$.

  (2) Use Lusin theorem
\end{proof}

\begin{exercise}{}{}
  If $f \in L([a,b])$, and for any non-negative integer $k$,
  $\int_a^b x^k f(x)\mathrm{d} x = 0$. Prove that $f(x) = 0$ a.e.
\end{exercise}

\begin{proof}
  The given condition implies that for any polynomial $P(x)$,
  $\int_a^b P(x)f(x)\mathrm{d} x = 0$.
\end{proof}

\begin{exercise}{}{}
  If $f \in L(\mathbb{R})$, prove that $\sum\limits_{n = -\infty}^{\infty}f(x+n)$ is absolutely convergent a.e.
\end{exercise}

\begin{proof}
  Consider $S_n = \sum_{k = -n}^n |f(x+k)|$,
  since $|f| \in L(\mathbb{R})$,
  \begin{equation}
    \int_0^1 \sum\limits_{k = -n}^n |f(x+k)|\mathrm{d}x
    = \sum\limits_{k = -n}^n \int_0^1 |f(x+k)|\mathrm{d}x
    = \sum\limits_{k = -n}^n \int_k^{k+1}|f(x)|\mathrm{d} x
    = \int_{-n}^n |f(x)|\mathrm{d} x < \infty.
  \end{equation}
  This implies that $S_n$ is finite a.e.
\end{proof}

\begin{exercise}{}{}
  Let $f$ be a measurable periodic function on $\mathbb{R}$ with period $T$,
  $f \in L([0, T])$. Prove that
  \begin{equation}
    \lim \limits _{x \rightarrow \infty} \frac{1}{x} \int_0^x f(t)\mathrm{d} t 
    = \frac{1}{T} \int_0^T f(t)\mathrm{d} t.
  \end{equation}
\end{exercise}

\begin{proof}
  Let $x = nT + b$ where $b \in [0, T)$, then
  \begin{equation}
    \frac{1}{x} \int_0^x f(t)\mathbb{d} t
    \leq \frac{1}{nT} \int_0^{(n+1)T} f(t)\mathrm{d} t
    = \frac{n+1}{nT} \int_0^T f(t)\mathrm{d} t.
  \end{equation}
  Similarly,
  \begin{equation}
    \frac{1}{x} \int_0^x f(t)\mathrm{d} t \geq \frac{n}{(n+1)T} \int_0^T f(t)\mathrm{d} t.
  \end{equation}
  Taking $n \rightarrow \infty$ we get the conclusion.
\end{proof}

\section{Absolute Continuity of Lebesgue Integral}

\begin{exercise}{}{}
  Let $E$ be a measurable set, $f \in L(E)$, $e_n := \{|f| \geq n\}$,
  prove that $\lim \limits _{n \rightarrow \infty} n \cdot m(e_n) = 0$.
\end{exercise}

\begin{proof}
  According to the definition of Lebesgue integral of non-negative simple
  functions we have
  \begin{equation}
    n \cdot m(e_n) = \int_{e_n} n \mathrm{d} x \leq \int_{e_n} |f(x)|\mathrm{d} x.
  \end{equation}
  It is not hard to see that $e_n$ is monotonically decreasing,
  and since $f$ is finite a.e., then
  \begin{equation}
    m(\lim \limits _{n \rightarrow \infty} e_n)
    = m(\lim \limits _{n \rightarrow \infty} \{|f| \geq n\}) = 0
  \end{equation}
  which means $\forall \delta > 0, \exists N > 0, \forall n > N$, $m(e_n) < \delta$.
  Then according to the absolute continuity of Lebesgue integral
  \begin{equation}
    \forall \epsilon > 0, \exists \delta > 0, \exists A \subset E, m(A) < \delta,
    \int_A |f(x)|\mathrm{d} x < \epsilon.
  \end{equation}
  Combining the above two equations yields $n\cdot m(e_n) < \epsilon$,
  so it converges to $0$.
\end{proof}

\section{Fatou's Theorem}

\begin{exercise}{}{}
  Let $\{f_n(x)\}$ be measurable functions, $\lim \limits _{n \rightarrow \infty} f_n(x) = f(x)$ a.e.
  Prove that there exists $K$ such that $\int_E |f_n(x)| \mathrm{d} x \leq K$.
\end{exercise}

\begin{proof}
  Since $\lim \limits _{n \rightarrow \infty} f_n(x) = f(x)$ a.e.,
  $\lim \limits _{n \rightarrow \infty} |f_n(x)| = |f(x)|$ a.e.
  Consider the Lebesgue integral of $|f(x)|$, by Fatou theorem
  \begin{equation}
    \int_E |f(x)|\mathrm{d} x = \int_E \lim \limits _{n \rightarrow \infty} |f_n(x)| \mathrm{d} x
    \leq \lim \limits _{n \rightarrow \infty} \int_E |f_n(x)|\mathrm{d} x \leq K < +\infty.
  \end{equation}
\end{proof}

\begin{exercise}{}{}
  Let $f_n$ be a sequence of non-negative measurable functions,
  $f_n \measconv f$. Prove that
  \begin{equation}
    \int_E f(x) \mathrm{d} x \leq \liminf _{n \rightarrow \infty} \int_E f_n(x)\mathrm{d} x.
  \end{equation}
\end{exercise}

\begin{proof}
  By Riesz theorem, there exists a subsequence $f_{n_k} \aeconv f$.
  By Fatou's theorem,
  \begin{equation}
    \int_E f(x)\mathrm{d} x \leq \liminf_{k \rightarrow \infty} \int_E f_{n_k}(x)\mathrm{d} x.
  \end{equation}
  It is not hard to see that
  $\liminf_{k \rightarrow \infty} \int_E f_{n_k}\mathrm{d} x \leq \liminf_{n \rightarrow \infty} \int_E f_n \mathrm{d} x$,
  which implies the conclusion.
\end{proof}

\begin{exercise}{}{}
  Let $f_n(x)$ be measurable functions, $f(x)$ be non-negative Lebesgue integrable,
  $|f_n(x)| \leq f(x)$ a.e. in $E$. Prove that
  \begin{equation}
    \int_E \liminf_{n \rightarrow \infty} f_n(x) \mathrm{d} x \leq \liminf _{n \rightarrow \infty} \int_E f_n(x)\mathrm{d} x.
  \end{equation}
\end{exercise}

\begin{proof}
  Consider $g_n(x) = f(x) + f_n(x)$, then $g_n(x)$ is non-negative measurable functions.
  Then by Fatou theorem
  \begin{equation}
    \int_E \liminf_{n \rightarrow \infty} f + f_n \mathrm{d} x
    \leq \liminf_{n \rightarrow \infty} \int_E f + f_n \mathrm{d} x.
  \end{equation}
  Cancel $\int_E f(x)\mathrm{d} x$ from both sides, then we get the conclusion.
\end{proof}

\begin{exercise}{}{}
  Let $f_k$ and $g_k$ be measurable functions on $E$,
  $|f_k(x)| \leq g_k(x)$.
  If $f_k(x) \rightarrow f(x)$ a.e., $g_k(x) \rightarrow g(x)$ a.e.,
  and $\int_E g_k(x)\mathrm{d} x \rightarrow \int_E g(x)\mathrm{d} x < \infty$.
  Prove that
  \begin{equation}
    \int_E f_k(x)\mathrm{d} x \rightarrow \int_E f(x)\mathrm{d}x.
  \end{equation}
\end{exercise}

\begin{proof}
  $g_k \pm f_k \geq 0$, and $g_k \pm f_k \rightarrow g \pm f$ a.e., then by Fatou's theorem
  \begin{equation}
    \liminf_{k \rightarrow \infty} \int_E (g_k \pm f_k)\mathrm{d} x \geq \int_E (g \pm f)\mathrm{d} x,
  \end{equation}
  which implies
  \begin{equation}
    \liminf_{k \rightarrow \infty} \int_E g_k \mathrm{d} x
    + \liminf_{k \rightarrow \infty} \int_E f_k \mathrm{d} x
    \geq \int_E (g + f)\mathrm{d} x,
    \quad
    \liminf_{k \rightarrow \infty} \int_E g_k \mathrm{d} x
    - \limsup_{k \rightarrow \infty} \int_E f_k \mathrm{d} x
    \geq \int_E (g - f)\mathrm{d} x,
  \end{equation}
  With the condition $\int_E g_k(x) \mathrm{d} x \rightarrow \int_E g(x)\mathrm{d} x$,
  we get
  \begin{equation}
    \int_E f \mathrm{d} x \leq \liminf_{k \rightarrow \infty} f_k \mathrm{d} x
    \leq \limsup_{k \rightarrow \infty}f_k \mathrm{d} x \leq \int_E f \mathrm{d} x.
  \end{equation}
  Then we deduce the conclusion.
\end{proof}


\section{Lebesgue's Dominated Convergence Theorem}

\begin{exercise}{}{}
  If $f \in L(E)$, prove that
  \begin{equation}
    \lim \limits _{k \rightarrow \infty} k \cdot m(\{|f| > k\}) = 0.
  \end{equation}
\end{exercise}

\begin{proof}
  Define $E_k := \{x \in E: |f| > k\}$, and $f_k := |f| \cdot \chi_{E_k}$.
  Then It is not hard to see that $|f_k| \leq |f|$.
  Since $|f| \in L(E)$, then $|f|$ is finite a.e. in $E$,
  thus $\lim \limits _{k \rightarrow \infty} f_k = 0$ a.e.
  Then
  \begin{equation}
    k \cdot m(E_k) \leq \int_{E_k} |f| \mathrm{d} x = \int_E f_k \mathrm{d} x.
  \end{equation}
  Taking $k \rightarrow \infty$ and applying LDCT,
  we get that $\lim \limits _{k \rightarrow \infty} \int_E f_k \mathrm{d} x$ exists and the limit is $0$.
\end{proof}

\begin{exercise}{}{}
  Let $f$ be a measurable function defined on a measurable set $E$,
  for any $\epsilon > 0$, there exists $g_{\epsilon}, h_{\epsilon} \in L(E)$
  such that
  \begin{equation}
    g_{\epsilon}(x) \leq f(x) \leq h_{\epsilon}(x), \quad
    \int_E [h_{\epsilon}(x) - g_{\epsilon}(x)] \mathrm{d} x < \epsilon.
  \end{equation}
  Prove that $f \in L(E)$.
\end{exercise}

\begin{proof}
  For any $n \in \mathbb{Z}^+$, define $g_n = g_{\epsilon = \frac{1}{n}}$ and $h_n = h_{\epsilon = \frac{1}{n}}$,
  $\ell_n(x) = f(x) - g_n(x)$.
  Since $\ell_n(x) \leq h_n(x) - g_n(x)$, then by LDCT we know $\ell_n \in L(E)$ and
  \begin{equation}
    \lim \limits _{n \rightarrow \infty} \int_E \ell_n(x)\mathrm{d} x = \int_E f - g_n(x)\mathrm{d} x < \frac{1}{n}.
  \end{equation}
  Then $f - g_n \in L(E)$, which implies that $f = (f-g_n)+g_n \in L(E)$.
\end{proof}

\section{Tonelli Theorem and Fubini Theorem}

\begin{exercise}{}{}
  Suppose $f \in L(\mathbb{R})$, $a$ is a positive real number.
  Prove that $\lim \limits _{n \rightarrow \infty}  n^{-a} f(nx) = 0$ a.e.
\end{exercise}

\begin{proof}
  Consider the convergence behavior of $\sum \int_{\mathbb{R}}|n^{-a}f(nx)|\mathrm{d} x$,
  \begin{equation}
    \int_{\mathbb{R}} |n^{-a}f(nx)|\mathrm{d}x
    = n^{-a} \int_{\mathbb{R}}|f(nx)|\mathrm{d}x
    = n^{-a-1} \int_{\mathbb{R}} |f(x)|\mathrm{d} x,
  \end{equation}
 since $|f(x)| \in L(\mathbb{R})$, $\sum \int_{\mathbb{R}} |n^{-a}f(nx)|\mathrm{d} x$ is convergent.
 By Tonelli theorem,
 \begin{equation}
   \int_{\mathbb{R}} \sum\limits_{n = 1}^{\infty} |n^{-a}f(nx)|\mathrm{d}x
   = \sum\limits_{n = 1}^{\infty} \int_{\mathbb{R}} |n^{-a}f(nx)|\mathrm{d} x < \infty.
 \end{equation}
 This implies that $\sum |n^{-a}f(nx)|$ is convergent a.e.,
 then $\lim \limits _{n \rightarrow \infty} |n^{-a}f(nx)| = 0$ a.e.
\end{proof}


