

\section{Measurable Functions}

\subsection{Concept of Measurable Functions}

\begin{definition}{Measurable Function}{}
  Let $f$ be a function defined on a measurable set $D$.
  If for any real number $a$, the set
  \begin{equation}
    \{x \in D: f(x) > a\}
  \end{equation}
  is measurable, then $f$ is said to be a \emph{measurable function on $D$}.
\end{definition}

\begin{note}
  It is equivalent to substitute the set in the definition of measurable function with
  $\{f \geq \alpha\}$, $\{f = \alpha\}$, $\{f \leq \alpha\}$, $\{f < \alpha\}$.
\end{note}

\begin{example}{Practice on Definition of Measurable Function}{}
  Prove that if $f$ is a measurable function if and only if for any $r \in
    \mathbb{Q}$, $\{x \in D: f(x) > r\}$ is measurable.
\end{example}

\begin{proof}
  Left-to-right is obvious, we only prove the right-to-left.
  For any $a \in \mathbb{R}$, we can find a sequence of rational numbers $r_n$
  such that $\lim \limits _{n \rightarrow \infty} r_n = a$.
  Then
  \begin{equation}
    \{f > a\} = \cap _{n=1}^{\infty} \{f > r_n\}.
  \end{equation}
  Since the intersection of countable measurable sets is also measurable,
  so the conclusion holds.
\end{proof}

\begin{example}{Properties of Measurable Functions}{}
  Measurable functions are \emph{basically} bounded;
  convergent measurable function sequences are \emph{basically} uniformly bounded:
  \begin{enumerate}
  \item If $m(E) < \infty$, $f(x)$ is measurable and finite a.e. on $E$, then
    \begin{equation}
      \forall \delta > 0, \exists M > 0, \exists E_{\delta} \subseteq E, m(E - E_{\delta}) < \delta,
      \forall x \in E_{\delta}, |f(x)| \leq M.
    \end{equation}
  \item If $m(E) < \infty$, $f_n(x) \aeconv f(x)$, both $f_n, f$ are measurable
    and finite a.e., then
    \begin{equation}
      \forall \delta > 0, \exists M > 0, \exists E_{\delta} \subseteq E, m(E - E_{\delta}) < \delta,
      \forall n, \forall x \in E_{\delta}, |f_n(x)| \leq M.
    \end{equation}
  \end{enumerate}
\end{example}

\begin{proof}
  (1) Since $f$ is finite a.e., $m(\{|f| = \infty\}) = 0$. We know
  \begin{equation}
    m(\{|f| < \infty\})
    = \lim \limits _{k \rightarrow \infty} m(\{|f| \leq k\}).
  \end{equation}
  According to the definition of sequence limit
  \begin{equation}
    \forall \delta > 0, \exists K > 0, \forall k \geq K,
    m(\{|f| < \infty\}) \leq m(\{|f| \leq k\}) + \delta.
  \end{equation}
  Let $E_{\delta} := \{|f| \leq k\}$, then $m(E - E_{\delta}) < \delta$ holds.

  (2) Remove infinite and divergent points first.
  Let $E_n := \{|f_n| = \infty\}$ and $E_0 := \{f_n \not \rightarrow f\}$,
  then $m(E_i) = m(E_0) = 0$.
  Let $A := \cup _{n = 0}^{\infty} E_n$, we have $m(A) = 0$.
  Define $B = E - A$,
  \begin{equation}
    \forall x \in B, \quad g(x) := \sup \left\{ |f_n(x)| , n \in \mathbb{N}^+\right\} < \infty.
  \end{equation}
  Apply the conclusion of (1),
  \begin{equation}
    \forall \delta > 0, \exists M > 0, \exists E_{\delta}, m(E - E_{\delta})
    \quad g(x) \leq M,
  \end{equation}
  which also implies that for all $n > 0$ and $x \in D$, $|f_n(x)| \leq M$.
\end{proof}

\begin{proposition}{Closure of Measurable Functions under Operations}{}
  Let $f$, $g$, and $f_n$ be measurable functions, then
  \begin{equation}
    f \pm g, \quad f \times g, \quad f / g, \quad \sup f_n, \quad \inf f_n, \quad
    \limsup \limits_{n \rightarrow \infty}f_n, \quad
    \liminf \limits_{n \rightarrow \infty}f_n
  \end{equation}
  are measurable.
\end{proposition}

\begin{proof}
  We first prove $\sup$ and $\inf$
  \begin{equation}
    \{\sup f_n > \alpha\} = \cup _{n = 1}^{\infty} \{f_n > \alpha\}, \quad
    \{\inf f_n < \alpha\} = \cup _{n = 1}^{\infty} \{f_n < \alpha\},
  \end{equation}
  which means $\sup f_n$ and $\inf f_n$ are measurable.

  Now prove $\limsup f_n$ and $\liminf f_n$ are measurable
  \begin{equation}
    \limsup _{n \rightarrow \infty} f_n(x) = \inf_{n \geq 1} \sup_{k \geq n}f_k(x),
    \quad
    \liminf _{n \rightarrow \infty} f_n(x) = \sup _{n \geq 1} \inf_{k \geq n}f_k(x),
  \end{equation}
  which means $\limsup f_n$ and $\liminf f_n$ are measurable.
\end{proof}

\begin{example}{Closure of Measurable Functions under Composition}{}
  Let $f(x)$ be a continuous function on $(-\infty, +\infty)$,
  and $g(x)$ a finite measurable function on measurable set $E \subset \mathbb{R}$.
  Prove that $h(x) = f(g(x))$ is also measurable.
\end{example}

\begin{proof}
  Since $f(x)$ is continuous, $G := f^{-1}(a, +\infty)$ is an open set.
  \begin{equation}
    \{x \in E: f(g(x)) > a\} = \{x \in E: g(x) \in G\} = g^{-1}(G) \cap E.
  \end{equation}
  Since $G$ is an open set of $\mathbb{R}$, then $G = \cup _{k = 1}^{\infty}(a_k, b_k)$.
  For each $k$, $g^{-1}(a_k, b_k)$ is measurable, so $g^{-1}(G)$ is also measurable.
  Then we get the conclusion that $\{x \in E: f(g(x)) > a\}$ is measurable,
  which indicates $f(g(x))$ is also measurable.
\end{proof}

\subsection{Approximation by Simple Functions}

\begin{definition}{Simple Function}{}
  Let $f$ be a function defined on a measurable set $D$, satisfying
  \begin{equation}
    f(x) = a_k, \quad x \in E_k,
  \end{equation}
  where $a_k$ is a constant and $D = \cup _{k = 1}^n E_k$.
  Then $f$ is said to be a \emph{simple function on $D$}.
\end{definition}

\begin{theorem}{Measurable Function Approximated by Simple Functions}{}
  Let $f$ be a measurable function on $D$,
  then there exists a sequence of simple functions $\{f_n\}$ such that
  \begin{equation}
    \lim \limits _{n \rightarrow \infty} f_n(x) = f(x), \quad x \in D.
  \end{equation}
  If $f(x)$ is non-negative, then $f_n$ monotonically converges to $f$;
  If $f(x)$ is bounded, then $f_n \unifconv f$.
\end{theorem}

\begin{proof}
  For any $n \geq 1$, let
  \begin{equation}
    f_n(x) =
    \begin{cases}
      n & \text{if } f(x) \geq n;\\
      \frac{k-1}{2^n} & \text{if } \frac{k-1}{2^n} \leq f(x) < \frac{k}{2^n},
                        \quad k=-n2^n+1,-n2^n+2,\cdots,n2^n;\\
      -n & \text{if } f(x) < -n.
    \end{cases}
  \end{equation}
\end{proof}

\subsection{Approximation by Continuous Functions}

\begin{theorem}{Lusin Theorem (Measurable Function vs Continuous Function)}{}
  Let $f$ be a almost-everywhere finite measurable function on a measurable set
  $D$.
  Then
  \begin{equation}
    \forall \epsilon > 0, \exists f^{\ast} \in C(D), \quad
    m(\{f \neq f^{\ast}\}) < \epsilon.
  \end{equation}
\end{theorem}

\begin{note}
  Lusin theorem indicates that measurable functions are
  \emph{basically} (except a sufficiently small set) continuous functions.
\end{note}

\begin{example}{Generalization of Lusin Theorem}{}
  Let $f(x)$ be a almost-everywhere finite measurable function on a measurable set $D$.
  If for any $\delta > 0$, there exists a closed set $F_{\delta} \subset E$ such that
  \begin{equation}
    m (E - F_{\delta}) < \delta, \quad f(x) \in C(F_{\delta}).
  \end{equation}
  Prove that $f$ is measurable on $E$.
\end{example}

\begin{proof}
  For each $n$, there exists $F_n \subset E$ such that $m(E - F_n) < \frac{1}{n}$,
  $f \in C(F_n)$.
  Let $F_0 := E - \cup _{n = 1}^{\infty}F_n$, then
  \begin{equation}
    m(F_0) \leq m (E - F_n) < \frac{1}{n} \rightarrow 0.
  \end{equation}
  Since $m(F_0) = 0$, then $f(x)$ is measurable on $F_0$.
  This implies that $f(x)$ is measurable on $E = \cup _{n = 0}^{+\infty}F_n$.
\end{proof}

\section{Convergence Results in Measure Theory}

\subsection{Pointwise Convergence and Uniform Convergence}

\begin{theorem}{Egoroff Theorem (Pointwise Convergence vs Uniform Convergence)}{}
  Let $f$ and $f_n$ be measurable functions that are almost-everywhere finite
  on a measurable set $D$, $m(D) < +\infty$.
  If $f_n \aeconv f$ on $D$,
  then
  \begin{equation}
    \forall \epsilon > 0, \exists F \subset D, m(D - F) < \epsilon, \quad
    f_n(x) \unifconv f(x), x \in F.
  \end{equation}
  where $F$ is a closed subset of $D$.
\end{theorem}

\begin{note}
  Egoroff theorem indicates that pointwise convergence is
  \emph{basically} (except a sufficiently small set) uniform convergence
  \textbf{on a finite-measure set}.
\end{note}

\begin{example}{Generalization of the Egoroff Theorem}{}
  Let $f_n$ be measurable functions on an arbitrary-measure set $D$.
  If $f_n$ basically uniformly converges to $f(x)$, then
  \begin{equation}
    f_n(x) \aeconv f(x).
  \end{equation}
\end{example}

\begin{proof}
  Since $f_n$ basically uniformly converges to $f$, then
  \begin{equation}
    \forall \delta > 0, \exists E_{\delta} \subset E, m(E - E_{\delta}) < \delta,
    \quad f_n(x) \unifconv f(x), x \in E_{\delta}.
  \end{equation}
  Denote $E_0 = \{x \in E: f_n(x) \not \unifconv f(x)\}$, then $E_0 \subset E - E_{\delta}$ for any $\delta > 0$.
  Thus
  \begin{equation}
    m(E_0) \leq m(E - E_{\delta}) < \delta.
  \end{equation}
  Let $\delta \rightarrow 0$, then $m(E_0) = 0$, which implies that $f_n(x) \aeconv f(x)$.
\end{proof}

\subsection{Convergence in Measure}

\begin{definition}{Convergence in Measure}{}
  Let $f$ and $f_n$ be measurable functions that are finite almost everywhere on
  a measurable set $D$. If for any $\delta > 0$,
  \begin{equation}
    \lim \limits _{n \rightarrow \infty} m(\{|f_n - f| \geq \delta\}) = 0,
  \end{equation}
  then we say that $f_n$ \emph{converges to $f$ in measure on $D$},
  denoted as $f_n \measconv f$.
\end{definition}

\begin{example}{Practice on Definition of Convergence in Measure}{}
  If $f_n(x) \measconv f(x)$ and $g_n(x) = f_n(x)$ a.e. in $E$.
  Prove that $g_n(x) \measconv f(x)$.
\end{example}

\begin{proof}
  By definition, for any $\delta > 0$, $m(\{|f_n - f| \geq \delta\}) \rightarrow 0$.
  We know
  \begin{equation}
    \{|g_n - f| \geq \delta \} \subset \{|f_n - f| \geq \delta\} \cup \{g_n \neq f_n\}.
  \end{equation}
  Then it is not hard to see that $m(\{|g_n - f| \geq \delta\}) \rightarrow 0$.
\end{proof}

\begin{theorem}{Riesz Theorem (Convergence in Measure to Pointwise Convergence)}{}
  Let $f$ and $f_n$ be measurable functions that are finite almost everywhere on
  a measurable set $D$. Then
  \begin{equation}
    f_n \measconv f \quad \Rightarrow \quad \exists \{f_{n_k}\} \subset \{f_n\}, f_{n_k} \aeconv f.
  \end{equation}
\end{theorem}

\begin{example}{Applications of Riesz Theorem}{}
  Prove the following statements
  \begin{enumerate}
  \item If $f_n(x) \measconv f(x)$, and for all $n \in \mathbb{Z}^+$, $f_n(x) \leq g(x)$ a.e. in $E$.
    Then $f(x) \leq g(x)$ a.e. in $E$.
  \item If $f_n(x) \measconv f(x)$ and $f_n(x)$ is monotonically increasing a.e. in $E$.
    Prove that $f_n(x) \aeconv f(x)$.
  \end{enumerate}
\end{example}

\begin{proof}
  (1) By Riesz theorem, then there exists $f_{n_k}(x)$ such that $f_{n_k} \aeconv f(x)$ in $E$.
  By condition, we know $f_{n_k}(x) \leq g(x)$ a.e. in $E$.
  Then the properties of function limit yields
  \begin{equation}
    f(x) \leq g(x), \quad a.e.
  \end{equation}

  (2) By Riesz theorem, there exists $f_{n_k}(x) \aeconv f(x)$,
  togather with $f_n(x)$ is monotonically increasing.
  Then $f_n(x) \aeconv f(x)$.
\end{proof}

\begin{theorem}{Lebesgue Theorem (Pointwise Convergence to Convergence in Measure)}{}
  Let $f$ and $f_n$ be measurable functions that are finite almost everywhere on
  a measurable set $D$, $m(D) < \infty$. Then
  \begin{equation}
    f_n \aeconv f \quad \Rightarrow \quad f_n \measconv f.
  \end{equation}
\end{theorem}

\begin{proof}
  By Egoroff theorem
  \begin{equation}
    \forall \delta > 0, \exists E \subset D, m(D - E) < \delta,
    \quad f_n \unifconv f, x \in E.
  \end{equation}
  This means for any $\epsilon > 0$,
  there exists $N > 0$ such that $|f_n(x) - f(x)| < \epsilon$ for all $n > N$ and $x \in E$.
  Then
  \begin{equation}
    m(\{|f_n - f| \geq \epsilon\}) \leq m(D - E) < \delta, \quad n > N,
  \end{equation}
  this implies that $f_n \measconv f$.
\end{proof}








